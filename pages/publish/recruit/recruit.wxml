<view class="yupao-common-container">
    <view class='common-publish-header' >
        <text class='common-publish-title'>{{ infoId ? "修改" : "发布" }}招工</text>
        <view class='common-publish-tipsbox'>
            <view class='common-publish-tips'>请完善以下信息</view>
        </view>
    </view>

    <view class='common-publish-body'>
        <view class='common-publish-content common-shaded-box'>
            <view class='common-publish-item'>
                <view class='common-publish-item-content'>
                    <text class='common-publish-words'>标题</text>
                    <input class='common-publish-input' value='{{ cardInfo.title }}' placeholder='请输入标题' bindinput='userEnterTitle'></input>
                </view>
            </view>
            <view class='common-publish-item'>
                <view class='common-publish-item-content'>
                    <text class='common-publish-words'>所需工种</text>
                    <view class='common-publish-allwords' wx:if="{{ cardInfo.workTypeIds.length  }}" bindtap="userChangeWorktype"><block wx:for="{{ cardInfo.workType }}" wx:key="{{ index }}"><text class='user-items-text' wx:if="{{ item.is_check && (item.has_children == 0) }}">{{ item.name }}</text><block wx:for="{{ item.children }}" wx:key="{{ index }}" wx:if="{{ item.is_check }}"><text class='user-items-text'>{{ item.name }}</text></block></block></view>
                    <input class='common-publish-input' disabled placeholder='请选择所需工种'  wx:else="{{ cardInfo.workTypeIds.length }}" bindtap="userChangeWorktype"></input>
                </view>
            </view>
            <view class='common-publish-item'>
                <view class='common-publish-item-content'>
                    <text class='common-publish-words'>地区</text>
                        <picker  mode="multiSelector"  range='{{ [areaProvince,areaCitys] }}' value='{{ [provinceIndex,cityIndex] }}' range-key="name" bindchange='provincePickerChange' bindcolumnchange="provincePickerScorllChange" >
                            <view class='common-publish-allwords' wx:if="{{ cardInfo.provinceId != ''  }}">{{ areaText  }}</view>
                            <input class='common-publish-input' disabled placeholder='请选择地区'  wx:if="{{ cardInfo.provinceId == '' }}" ></input>
                        </picker>
                </view>
            </view>
            <view class='common-publish-item'>
                <view class='common-publish-item-content'>
                    <text class='common-publish-words'>联系人</text>
                    <input class='common-publish-input' value='{{ cardInfo.username }}' placeholder='请输入联系人' bindinput='userEnterUsername'></input>
                </view>
            </view>
            <view class='common-publish-item'>
                <view class='common-publish-item-content'>
                    <text class='common-publish-words'>联系电话</text>
                    <input class='common-publish-input' value='{{ userPhone }}' placeholder='请输入联系电话' bindinput='userEnterNewtel'></input>
                </view>
            </view>
            <view class='common-publish-item' wx:if="{{  (userPhone == '') || ((userPhone != cardInfo.cardTel) && (userPhone != cardInfo.memberTel))  }}">
                <view class='common-publish-item-content common-publish-item-code '>
                    <text class='common-publish-words'>验证码</text>
                    <input class='common-publish-input' type='number' value='' placeholder='请输入验证码' maxlength='4' bindinput='userEditPhoneCode'></input>
                    <text class='publish-getcode-btn' bindtap='userGetCode'>{{ codeTips }}</text>
                </view>
            </view>
            <view class='common-publish-item'>
                <text class='common-publihs-contenttips'>详情</text>
                <textarea placeholder='请你输入招工详情,越详细越好,这样有助于你更快的招到好工人哟~' wx:if="{{ showTextarea }}" value='{{ cardInfo.content }}' focus='{{ textareaActive }}' bindtap='getTextareaFocus' bindinput='userEnterContent'></textarea>
            </view>
        </view>
        <view class='common-publish-content common-shaded-box publish-uploads-img'>
            <view class='publish-uploads-title' bindtap='userDoUploads'>上传图片<view class='allow-not-uploads'><view class='common-uploads-bgbox'><text class='common-trans {{ showUploads ? "user-uploads-active" : "" }}'></text></view>(可以不上传)</view></view>
            <view class='publish-uploads-content clearfix' wx:if="{{ showUploads }}">
                <view class='publish-uploads-item' wx:for="{{ cardInfo.imgs }}" wx:key="index" wx:for-index="index">
                    <view class='uploads-item-content' bindtap='userUploadCardImg' data-index="{{ index }}"  data-type="1">
                        <image src='{{ item.httpurl }}'></image>
                        <view class='del-upload-item-img' catchtap="delCardImg" data-index="{{ index }}">
                            <image src='http://yupao.oss-cn-beijing.aliyuncs.com/miniprogram/images/imgs-del.png'></image>
                        </view>
                    </view>
                </view>
                <view class='publish-uploads-item' wx:if="{{ cardInfo.imgs.length < cardInfo.imgnum  }}" wx:for="{{ (cardInfo.imgnum - cardInfo.imgs.length ) }}" wx:key="index">
                    <view class='uploads-item-content' bindtap='userUploadCardImg' data-type="0" data-index="{{ cardInfo.imgs.length + index }}"></view>
                </view>
            </view>
        </view>
    </view>

    <text class='common-sure-btn' bindtap='userPublishCard'>确认发布</text>

</view>

<view class='publish-choose-wordtype' wx:if="{{ showWorkType }}">
    <view class='publish-choose-contentbox common-shaded-box'>
        <view class='publish-choose-header'>选择工种</view>
        <view class='publish-choose-body'>
            <view class='publish-choose-content-item' wx:for="{{ cardInfo.workType }}" wx:key="{{ index }}" wx:for-index="pindex" wx:if="{{ item.has_children }}">
                <view class='publish-choose-content-header'>{{ item.name }}</view>
                <view class='publish-choose-content-list' wx:for="{{ item.children }}"  wx:key="{{ index }}" wx:for-index="cindex"   bindtap='userClickItem' data-type='workType'  data-id="{{ item.id }}" data-check="{{ item.is_check }}" data-index='{{ pindex }}' data-key="{{ cindex }}">
                    <text class='choose-content-lish-left'>{{ item.name }}</text>
                    <text class='choose-content-checkbox {{ item.is_check ? "choose-content-checkbox-active":"" }}'></text>
                </view>
            </view>
        </view>
        <view class='publish-choose-footer flex-row'>
            <view bindtap='userSureWorktype'>确定</view>
        </view>
    </view>
</view>
